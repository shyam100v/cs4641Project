{"name":"What makes a YouTube video trend?","tagline":"","body":"# What makes a YouTube video trend?\r\n\r\nContributors (in alphabetical order): [Carla Lorente Anon](https://github.com/CarlaLorenteAnon), [Yuqi He](https://github.com/dave2929), [Preethi Narayanan](https://github.com/preethin248), [Divya Umapathy](https://github.com/preethin248), [Shyam Krishnan Venkateswaran](https://github.com/shyam100v)\r\n\r\n## Introduction/Background:\r\nYouTube is an online video-sharing platform with billions of users, posting and watching content for entertainment and education. YouTube __monetizes popular videos__ for the number of views as it increases the use and popularity of the platform itself. With our project, we hope to provide insights on how to make money on YouTube by analyzing trending video features and predicting the popularity of a video given certain features. \r\n\r\n## Motivation and methods\r\n\r\nWe want to help people __monetize their content more effectively__ on YouTube by increasing their popularity on the platform! To that end, we carry out the following analyses:\r\n\r\n1. __PCA__: to __reduce dimension of features__ through capturing variation and visualize correlation between different features            <br/>\r\n2. __DBSCAN__: to find the __popular time published__ and __optimal length, number of capital letters, and punctuation in video title__     <br/>\r\n3. __Linear Regression__: predict the views based upon any other correlated features            <br/>\r\n4. __Multiple Regression__: to predict the popularity of a video solely based on the __title's characteristics__ (length, capital letters, and puctuation)<br/>\r\n5. __Gradient Boosting Regressor__: To build an ensemble regressor to predict the number of views and __rank feature importances__    <br/>\r\n\r\n## Dataset: \r\n-> https://www.kaggle.com/datasnaek/youtube-new <br/>\r\nThis dataset includes several months of data on daily trending YouTube videos. Data includes the video title, channel title, publish time, tags, views, likes and dislikes, description, and comment count for up to 200 trending videos per day for several regions. More information like the channel’s age, channel's video count, and subscriber count have been added using the YouTube API. From this dataset, we will only be using the USA's, Canada's, and Great Britain's trending video data. \r\n\r\n### YouTube API\r\nWe also augment the available data with our own data scavenged from YouTube using its APIs. We wrote a [script](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/youtubeCrawl.ipynb) to fetch the top 200 trending videos from USA, Canada and Great Britain everyday for roughly a month. In addition, the channel information was also fetched and [compiled](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/combiningData.ipynb) with the data from Kaggle. \r\n\r\n\r\n## Cleaning up the data\r\n1. __Languages__: Youtube fosters content from all around the world in numerous languages. We discarded video entries in the dataset that do not have English titles to facilitate the analysis of the data. (see [code)](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/CleanData_RemovingNonEnglish.ipynb)\r\n2. __Handling duplicates__: Several videos are in trending charts for multiple days. Therefore, we retained only one copy of each video, the version with the highest number of views.\r\n3. __Null entries__: videos with ratings disabled and comments disabled were removed.\r\n4. __Handling dates and time__: We parsed the dates and times in YouTube's native format to formats suitable for machine learning algorithms (floats and integets) (see [code](https://github.com/shyam100v/cs4641Project/blob/master/ParseTimeAndDatesImproved))\r\n5. __Handling outliers__: To gain insights for the majority of the data, any data points that were outside +/-2 standard deviations from the mean were eliminated.\r\n\r\n### Data Format\r\nThe csv format of final file that contains both Old and New data:\r\n|                  \t   |                        |                               |\r\n| -------------------- | ---------------------- | ----------------------------- |\r\n|1. regionTrending\t   |12. videoDislikes       |23. thumbnail_link\t            |\r\n|2. trendingRank\t     |13. videoCommentCount   |24. comments_disabled\t        |\r\n|3. timeFetched\t       |14. videoDescription    |25. ratings_disabled\t          |\r\n|4. videoId\t           |15. videoLicenced\t      |26. video_error_or_removed\t    |\r\n|5. videoTitle\t       |16. channelTitle\t      |27. publishDateCorrectFormat   |\r\n|6. videoCategoryId\t   |17. channelId\t          |28. trendingDateCorrectFormat  |\t\r\n|7. videoPublishTime   |18. channelDescription  |29. dayDifference              |\r\n|8. videoDuration\t     |19. channelPublishedAt  |30. publishedZTime             |\r\n|9. videoTags\t         |20. channelViewCount    |31. publishedZTimeFloat\t      |\t\r\n|10. videoViews\t       |21. channelSubsCount    |32. publishedDayOfWeek         |\r\n|11. videoLikes\t       |22. channelVideoCount\t  |33. newOrOldData               |\r\n\t\r\n ## Data Analysis\r\n **Correlation**\\\r\nFirst, an analysis of the correlation between different variables was performed. Looking at the first row, it is seen that only likes, dislikes and comment count are correlated with the number of views of a video.\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Correlation%20table.PNG\">\r\n\t<br>\r\n\t  Figure 1: Correlation Table\r\n</p>\r\n\r\n**Statistical Summary**\\\r\nThis analysis is useful to potentially identify any outliers in the data.\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/max-min-std.PNG\">\r\n\t<br>\r\n\t  Figure 2: Statistical Summary\r\n</p>\r\n\r\n**Category ID Analysis**\\\r\nThe category ID represents the content of the video (Click [here](https://gist.github.com/dgp/1b24bf2961521bd75d6c) to see the different categories). \r\n* __Categories with high number of views__: \"Film & Animation\", \"Music\", \"News and Politics\", and \"Entertainment\"\r\n* __Categories with least number of views__: \"Nonprofits & Activism\" and \"Shorts\"\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/CategoryID.PNG\">\r\n\t<br>\r\n\t  Figure 3: Views versus Category ID\r\n</p>\r\n\r\n## Principal Component Analysis(PCA)\r\nWe selected some properties from the original video dataset as features of videos, including trending rank, video category, number of views, likes, and dislikes, number of comments, publish time, and video channel related features. For features like the duration of video and the publish time, we preprocessed our data such that they are represented in the same unit (seconds) and in a 24-hour time scale.\r\n\r\nWe combined all 12 features into a training dataset and apply PCA. PCA was used to reduce the dimension of features through capturing variation. Here is the cumulative explained variance plot. \r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/pca_variance.PNG\">\r\n\t<br>\r\n\t  Figure 4: PCA variance plot\r\n</p>\r\n\r\nFrom the plot, we can see that at 6 components, we will get a desired cumulative explained variance(0.9). We also made two component PCA scatter plots to give us some visualizations.\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/pca_views.PNG\">\r\n\t<br>\r\n\t  Figure 5: PCA number of views plot\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/pca_likes.PNG\">\r\n\t<br>\r\n\t  Figure 6: PCA number of likes plot\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/pca_dislikes.PNG\">\r\n\t<br>\r\n\t  Figure 7: PCA number of dislikes plot\r\n</p>\r\n\r\nFrom the scatter plots, we can see that the number of views, likes, and dislikes are correlated. Low number of views, low number of likes, and low number of dislikes are all clustered at the middle-left part of the graph.\r\n\r\n## DBSCAN\r\n**Publishing Times**\\\r\nUsing DBSCAN clustering on the video views and publishing time features, we can see that the optimal time frame to publish videos on YouTube is from about __1:00 pm to 7:00 pm GMT__ with the peak time between __5:00 pm - 7:00 pm__; however, we did find many noise points and the clusters found were quite low in view count. (see [code)](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/DBSCAN_publishingHour.ipynb)\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/dbscan_clusters.PNG\">\r\n\t<br>\r\n\t  Figure 8.1: DBSCAN Hour Published\r\n</p>\r\n\r\n**Video Titles**\\\r\nAfter using DBSCAN clustering on three different characteristics of a video title (length, number of capital letters,and  number of exclamation/question marks) we can see that the results in the graphs below are different than we originally expected. (see [code](https://aw.githubusercontent.com/shyam100v/cs4641Project/master/title_analysis.py))\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Title_Length_DBSCAN.png\">\r\n\t<br>\r\n\t  Figure 8.2: DBSCAN Title Length\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Num_Caps_DBSCAN.png\">\r\n\t<br>\r\n\t  Figure 8.3: DBSCAN Capital Letters\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Num_Puncs_DBSCAN.png\">\r\n\t<br>\r\n\t  Figure 8.4: DBSCAN Punctuation Marks\r\n</p>\r\n\r\nThe clusters for majority of the graphs are evenly distributed along the x axis, showing very little correlation to the number of views. But, there are a couple clusters higher up on the graph that show that titles with lengths around 40 characters, minimal capital letters, and minimal punctuation marks are the videos accumulating more views. As a conclusion, there is little relation seen between the factors, but there is some evidence pointing to certain title formats.\r\n\r\n## Linear Regression\r\n\r\n**Histograms**\\\r\nA basic histogram of the number of views, likes and dislikes was plotted. As it is appreciated on the graphs below, the three graphs are heavily skewed which is understandable — most common YouTubers probably won’t have that many views, likes and dislikes. Ideally, the data should resemble a Gaussian distribution. Luckily, a log tranformation can be applied to the number of views, likes and dislikes to achieve that.\r\n\r\n![Number of views without logs](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Number%20of%20views%20without%20logs.PNG)\r\n![Number of dislikes without logs](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Number%20of%20dislikes%20without%20logs.PNG)\r\n![Number of likes without logs](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Number%20of%20likes%20without%20logs.PNG)\r\n![Log number of dislikes](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Log%20number%20of%20dislikes.PNG)\r\n![Log number of likes](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Log%20number%20of%20likes.PNG)\r\n![Log number of views](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Log%20number%20of%20views.PNG)\r\n\r\n**Linear Regression**\\\r\nUsing this 3 histograms above, a linear regression of the log number of views versus the log number of likes and dislikes can be plotted (see [code](https://github.com/shyam100v/cs4641Project/blob/master/Linear%20Regression.py)). As expected, both correlations show an R^2 greater than 0.6, showing a big correlation between both the number of likes and dislikes and the number of views of a video. \r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Linear%20regression%20of%20log%20views%20versus%20log%20dislikes.PNG\">\r\n\t<br>\r\n\t  Figure 9: Linear regression of log views versus log dislikes\r\n</p>\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Linear%20regression%20of%20log%20views%20versus%20log%20likes.PNG\">\r\n\t<br>\r\n\t  Figure 10: Linear regression of log views versus log likes\r\n</p>\r\n\r\n\r\nThis analysis was only performed on these 2 variables since no other variables appear to correlate with the number of views of a video. For example, when performing the linear regression of views versus the title length, an R^2 close to 0 is obtained.\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/Views%20versus%20Title%20Length.PNG\">\r\n\t<br>\r\n\t  Figure 11: Linear regression of views versus title length\r\n</p>\r\n\r\n## Multiple Regression\r\n**Data Modifications**\\\r\nData regarding number of views was originally very skewed, so we removed any outliers and took the log of the number of views. This resulted in a Gaussian distribution for the number of views, which is ideal for any modeling. The below graphs show the data distribution before and after applying the log function. \r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_viewskew.png\">\r\n\t<br>\r\n\t  Figure 12: Multiple Regression Skewed Data\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_viewlog.png\">\r\n\t<br>\r\n\t  Figure 13: Multiple Regression Modified Data\r\n</p>\r\n\r\n**Multiple Regression Analysis**\\\r\nWe used three parameters versus the number of views on a video (title length, number of capital letters, number of punctuations marks). This would have resulted in a 3-dimensional regression model in a 4-dimensional space. As it is difficult to understand a 4-dimensional model, the following graphs show the regression models of just two parameters each versus the log of the number of views. (see [code](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/Multiple%20Regression%20(Video%20Title%20Analysis).ipynb))\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_lengthcapsreg.png\">\r\n\t<br>\r\n\t  Figure 14: Multiple Regression Length vs Number of Capital Letters\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_lengthpuncsreg.png\">\r\n\t<br>\r\n\t  Figure 15: Multiple Regression Length vs Number of Punctuation Marks\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_capspuncsreg.png\">\r\n\t<br>\r\n\t  Figure 16: Multiple Number of Capital Letters vs Number of Punctuation Marks\r\n</p>\r\n\r\nAs can be seen above, the grey plane in each of the graphs is the regression model that fits the set of data points the best. Since our data points are fairly spread out and do not show much correlation to the number of views, the fitted planes are relatively flat, and center around the area where most of the data points are in order to at least fit for a majority of videos. \r\n\r\n**Result Analysis**\\\r\nAs a representation of the accuracy of our model, the below graph shows a comparison of the actual number views versus the predicted number of views for a random set of data points.\r\n\r\n</p>\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_predvsact.png\">\r\n\t<br>\r\n\t  Figure 17: Predicted Views vs Actual Views\r\n</p>\r\n\r\nIn the below graph, where it shows the error in prediction based on the number of actual views, it can be seen that the lower the actual number of views a video has, the more accurate this model will be in its predictions. \r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/MultReg_accuracy.png\">\r\n\t<br>\r\n\t  Figure 18: Multiple Regression Model Accuracy\r\n</p>\r\n\r\nIn conclusion, we see that the characteristics of a video title actually have a much smaller effect on the popularity of a video than we originally believed and has an incredibly low correlation with the number of views, especially on videos with extremely high view count.\r\n\r\n\r\n## Gradient Boosting Regressor\r\n\r\nGradient Boosting Regressor is a form of tree ensemble model which builds an ensemble of weak prediction models. A new tree is trained at each step additively over the previous stage with the loss function as the residual error from previous stage. \r\n\r\n__Model used__: The [sklearn.ensemble.GradientBoostingRegressor model](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.GradientBoostingRegressor.html) from sklearn module is used. The module also provides a method to visualize the __importance of individual features__ after the model is trained. We use this to infer the most important contributors in predicting the number of views of a video (See [here](https://raw.githubusercontent.com/shyam100v/cs4641Project/master/simpleDataAnalysis.ipynb)).\r\n\r\n__Data Preparation__: The data collected using the __YouTube API__ is used to train and test the model with the logarithm of number of views of a video as the target label. Only the videos that have a view count between 1000 and 10 million are used. Sample of the data used is shown:\r\n\r\n<p align=\"center\">\r\n  <img height = \"450\" width = \"500\"  src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/dataSample1.png\">\r\n\t<br>\r\n\t  Figure 19: Sample of data for analysis\r\n</p>\r\n\r\n__Model performance and Feature importance__\r\n\r\nWith all the above listed features, the model has an RMSE of __772445__ views. We infer from the plot that the number of likes and dislikes are the most important features in predicting the number of views. \r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/mdi1.png\">\r\n\t<br>\r\n\t  Figure 20: Feature importance-1\r\n</p>\r\n\r\nWhile this is intuitive, this does not serve as a good model for prediction since likes, dislikes, age of video and comments are not known in advance. After removing these features, the feature importance is plotted below:\r\n\r\n<p align=\"center\">\r\n  <img src=\"https://raw.githubusercontent.com/shyam100v/cs4641Project/master/image/mdi3.png\">\r\n\t<br>\r\n\t  Figure 21: Feature importance-2\r\n</p>\r\n\r\n\r\nIt is seen that the channel subscriber count, the number of videos, total views on the channel, and age of the channel are the most important predictors. \r\n\r\n## Conclusion\r\n\r\nFrom the analyses we carried out, following are the key insights and results:\r\n\r\n1. __Categories with high number of views__: Film & Animation, Music, Entertainment and News and Politics.\r\n2. __Categories with least number of views__: Nonprofits & Activism and Shorts\r\n3. __1:00 pm to 7:00 pm GMT__ is a popular time frame to publish videos so they trend, especially between 5:00 pm-7:00 pm. There is __no optimal title length. Fewer (or none) capital letters and punctuation__ in video title is optimal.\r\n4. There is a relationship between number of dislikes, number of likes, and number of views.\r\n5. The video title plays a __minor role__ in the popularity of the most popular videos. But, for the less exposed or advertised videos, keeping to minimal capital letters and punctuation can help boost views slightly. \r\n6. The __channel's popularity__ plays a major role in determining the popularity of a video. Particularly, the __channel subscriber and view count, age of channel and channel video count__ are dominant factors.\r\n\r\n\r\n## Future Work \r\n\r\nThe following are a few possible directions in which our work can be extended:\r\n1. Analysis of the impact of keywords in the title on number of views\r\n2. Deeper analysis of relation between channel popularity and video popularity\r\n3. Estimating potential size of audience for a given video type (Music, Movie trailer, etc), language among other features.\r\n\r\n## Individual Contributions\r\nCarla: Data Analysis, Cleaning data and Linear Regression <br/>\r\nYuqi: Principal Component Analysis <br/>\r\nPreethi: DBSCAN and Multiple Regressor <br/>\r\nDivya: Finding dataset, Cleaning data and DBSCAN <br/>\r\nShyam: Cleaning/Augmenting data using API and Gradient Boosting Regressor <br/>\r\n\r\n## References:\r\n[1] Gill, Phillipa et al. \"Youtube traffic characterization: a view from the edge.\" Proceedings of the 7th ACM SIGCOMM conference on Internet measurement. 2007. <br/>\r\n[2] F Figueiredoet al \"The tube over time: characterizing popularity growth of youtube videos.\" Proceedings of the fourth ACM international conference on Web search and data mining. 2011.<br/>\r\n[3] G. Chatzopoulou et al, \"A First Step Towards Understanding Popularity in YouTube,\" INFOCOM IEEE Conference on Computer Communications Workshops, CA, 2010 <br/>\r\n[4] Coding, Sigma. “How to Build a Linear Regression Model in Python | Part 1.” Youtube, Apr. 2019, www.youtube.com/watch?v=MRm5sBfdBBQ.<br/>\r\n[5] \"DBSCAN Clustering Easily Explained with Implementation.\" Youtube,  https://www.youtube.com/watch?v=C3r7tGRe2eI&t=942s <br/>\r\n[6] \"Multiple Regression Analysis in Python | Part 1.\" Youtube Apr 27, 2019 https://www.youtube.com/watch?v=M32ghIt1c88 <br/>\r\n[7] \"Youtube Views Predictor.\" Aravind Srinivasan, December 12, 2017 https://towardsdatascience.com/youtube-views-predictor-9ec573090acb <br/>\r\n\r\n\r\n","note":"Don't delete this file! It's used internally to help with page regeneration."}